import sys
import os
boilerplate = '20202020202020202020202020202020202020202020202020202020202020202020202020202020202020202e2d27282020202020292e20202020202020202020202020200a20202020202020202020202020202020202020202020202020202020202020202020202020202e2727603e27202020205c5f5f5f2f20205c202020202020202020202020200a2020202020202020202020202020202020202020202020202020202020202020202020202e27202e27602020202020202e2e2e2e2e2d2d2d2d2d2e2e2e20202020202020200a20202020202020202020202020202020202020202020202020202020202020202020202f202e2720205f5f20202e2d6020202020202020202020202020602e2020202020200a202020202020202020202020202020202020202020202020202020202020202020202f202f2020202f20205c60202020202020202020202020202e3a272d2d3a2e202020200a20202020202020202020202020202020202020202020202020202020202020202028202f20202028202f20205c202020202020202020202020202020602d2e5f5f2e2e2d3b0a2020202020202020202020202020202020202020202020202020202020202020202059202020207c207c202020602d2e2e5f5f20202e2c2020202020202020202020202d200a2020202020202020202020202020202020202020202020202020202020202020202820202020202820272e20205c205f5f5f5f605c2029602d2e5f20202020205f2d6020200a2020202020202020202020202020202020202020202020202020202020202020207c2020202020275c2020205f5f2f2020205f5f5c27202f20603a606027276020202020200a2020202020202020202020202020202020202020202020202020202020202020202820202020202e7c5c5f2020282020202f202e2d7c207c272e7c202020202020202020200a202020202020202020202020202020202020202020202020202020202020202020205c202020207c27202f202c275c2028202857577c205c57296a202020202020202020200a20202020202020202020202020202020202020202020202020202020202020202020205c5f5f2e7c20207c202020205c5f5c5f602f20202060602d2e2020202020202020200a2020202020202020202020202e2d2d27272727606060602d2e202020202020202020202020207c2720206c2020202020202020202020205c5f5f2f202020202020202020200a20202020202020202020202f20202020202020202020202020602e20202020202020202020207c20202020602e20202d2c5f5f5f5f5f5f2e2d2720202020202020202020200a202020202020202020202f20202020202020202020202020202020602e5f5f5f5f5f5f5f5f2e7c202020202020602e2020202f2020202020202020202020202020202020200a202020202020202020282020202020202020202c2e2d2d27273e2d272c3a202020202020207c2720202020202020207c2028202020202020202020202020202020202020200a2020202020202020207c20202020202020207c20202020202f202020285f2920202020202e7c20202020202020202c27292c2d606027272d2e2020202020202020202020200a2020202020202020207c202020202020202e27202020207c202c3b2020202020202020207c27202020202020202f202c272020202020202020602e202020202020202020200a20202020202020202e7c202020202020207c2e202020207c20285f2920203b2c20202020272e202020202020282e282020202020202020202020203a2020202020202020200a20202020202020207c2720202020202020277c202020207c2020202020285f2920202020202060272d2d2d27602020602e20202020202020603a603b2020202020202020200a20202020202020207c202020202020202020272e20202f205c20202020202020202f2020202020202020202020603a2e203b2020202020202020273a2020202020202020200a20202020202020207c2e20202020202020202020602e2020207c2020202020202f2d2c5f5f5f5f5f5f5f5c20202027206020202020202e2d3b20207c2020202020202020200a2020202020202020277c2020202020202020202020205c5f2f2020202020202f20202020207c202020207c5c202020602d2d2d2d27602e27202e27202020202020202020200a2020202020202020207c20202020202020202020202020292020202020202f20202020207c20202020207c20602d2d2c202020205c602727602020202020202020202020200a202020202020202020272e20202020202020202020202f2020202020207c2020202020207c20202020207c2020202f202020202020292020202020202020202020202020200a2020202020202020202020602d2d5f5f5f5f5f2d2d277c2020202020207c2020202020207c2020202020207c2028202020202020207c2020202020202020202020202020200a202020202020603a2e5f2e6020202020202020272e207c2020202020207c2020202020207c2020202020207c20205c2020202020207c2020202020202020202020202020200a202020202020202720202020202020202e2d2e2020297c202020202020205c20202020207c202020202020205c2020602e5f5f5f2f202020202020202020202020202020200a2020202020202020602d2d2d3b202020202920292720205c5f5f5f5f5f5f5f2920202020205c5f5f5f5f5f5f5f2920202020202020202020202020202020202020202020200a202020202020202020202e3a5f5f5f2d27202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a2020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200a'
import re
def sorted_nicely( l ):
    """ Sorts the given iterable in the way that is expected.
 
    Required arguments:
    l -- The iterable to be sorted.
 
    """
    convert = lambda text: int(text) if text.isdigit() else text
    alphanum_key = lambda key: [convert(c) for c in re.split('([0-9]+)', key)]
    return sorted(l, key = alphanum_key)

def main(argv):
    if len(argv) > 1:
        dirname = argv[1]

    else:
        from Tkinter import Tk
        from tkFileDialog import askdirectory

        AIList = []
        FileList = []

        Tk().withdraw()
        dirname = askdirectory()
        if dirname =='':
            sys.exit(0)

        result = [os.path.join(dp, f) for dp, dn, filenames in os.walk(dirname) for f in filenames if os.path.splitext(f)[1] == '.bot']
        for file in sorted_nicely(result):
            fo = open(file, "r").readlines()[1]
            AIList.append(fo[6:])
            FileList.append(file[len(dirname)+1:])

        binding_file = open(dirname + "/tempBindings.txt", "wb")
        binding_file.write(boilerplate.decode('hex'))
        binding_file.write("    #COPY LINES BELOW TO Bindings.py\n")
        for idx, bot in enumerate(AIList):
            binding_file.write("%s\n" % "    #%s\n    list.append( (\"%s\", \"Omni\", { 'invertible': False, 'radius':1.0, 'nose' : math.pi * 0, 'range' : 99, 'topspeed' : 4.0, 'throttle': 100, 'turnspeed' : 2.5, 'turn':60, 'weapons': (0, ) }) )" % (FileList[idx], bot[:-1]))
        sys.exit(0)

if __name__ == "__main__":
    main(sys.argv)